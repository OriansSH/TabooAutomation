# Test info

- Name: Purchase Tests >> Taboo > Logged In Customer > Checkout page > Purchase with Coupon Code
- Location: /home/runner/work/TabooAutomation/TabooAutomation/__tests__/purchase/purchaseTests.spec.js:51:5

# Error details

```
Error: expect(locator).toBeHidden()

Locator: locator('.header--funds--coins--add.gold')
Expected: hidden
Received: visible
Call log:
  - expect.toBeHidden with timeout 5000ms
  - waiting for locator('.header--funds--coins--add.gold')
    6 Ã— locator resolved to <div class="header--funds--coins--add gold"></div>
      - unexpected value "visible"

    at Purchase.clickOnPurchaseGoldButton (/home/runner/work/TabooAutomation/TabooAutomation/__tests__/purchase/PurchasePage.js:24:35)
    at /home/runner/work/TabooAutomation/TabooAutomation/__tests__/purchase/purchaseTests.spec.js:52:9
```

# Test source

```ts
   1 | import { expect } from '@playwright/test';
   2 | import * as utils from '../utils.js';
   3 |
   4 | export class Purchase {
   5 |     constructor(page) {
   6 |         this.page = page;
   7 |         this.purchaseGold = page.locator(utils.purchaseGoldButton);
   8 |         this.purchaseSecret = page.locator(utils.purchaseSecretButton);
   9 |         this.toggleGold = page.locator(utils.toggleGoldButton);
  10 |         this.toggleSecret = page.locator(utils.toggleSecretButton);
  11 |         this.xButton = page.locator(utils.xButton);
  12 |         this.packageLocator = page.locator('div').filter({ hasText: /^500kGOLD COINS\+550Secret Coins\$500$/ }).getByRole('button');
  13 |         this.couponField = page.getByPlaceholder(utils.couponPlaceholder);
  14 |         this.couponButton = page.locator(utils.couponCodeButton)
  15 |         this.oldPrice = page.locator(utils.packageOldPriceClass);
  16 |         this.checkoutPurchaseButton = page.locator(utils.checkoutPurchaseButton);
  17 |         this.generalErrorLocator = page.locator(utils.generalErrorLocator);
  18 |         this.buyIconLocator = page.locator(utils.buyIcon);
  19 |     }
  20 |
  21 |
  22 |     async clickOnPurchaseGoldButton() {
  23 |         await this.purchaseGold.click();
> 24 |         expect(this.purchaseGold).toBeHidden();
     |                                   ^ Error: expect(locator).toBeHidden()
  25 |     }
  26 |     async clickOnPurchaseSecretButton() {
  27 |         await this.purchaseSecret.click();
  28 |     }
  29 |     async toggleGoldButton() {
  30 |         await this.toggleGold.click();
  31 |     }
  32 |     async toggleSecretButton() {
  33 |         await this.toggleSecret.click();
  34 |     }
  35 |     async clickOnXButton() {
  36 |         await this.xButton.click();
  37 |     }
  38 |     async selectPackage() {
  39 |         await this.packageLocator.click();
  40 |     }
  41 |     async fillCouponCode(couponCode) {
  42 |         await this.couponField.fill(couponCode);
  43 |     }
  44 |     async clickOnCouponButton() {
  45 |         await this.couponButton.click();
  46 |         return this.couponButton;
  47 |     }
  48 |     async verifyOldPriceVisible() {
  49 |         await expect(this.oldPrice).toBeVisible();
  50 |     }
  51 |     async clickOnCheckoutPurchaseButton() {
  52 |         await this.checkoutPurchaseButton.click();
  53 |         return this.checkoutPurchaseButton;
  54 |     }
  55 |     async verifyGeneralErrorVisible() {
  56 |         await expect(this.generalErrorLocator).toHaveText(utils.couponEmptyGeneraError);
  57 |     }
  58 |     async clickOnBuyIcon() {
  59 |         await this.buyIconLocator.click();
  60 |         return this.buyIconLocator;
  61 |     }
  62 |     async verifyStoreWidget() {
  63 |         const storeWidget = this.page.locator('.ple-title');
  64 |         await expect(storeWidget).toHaveText('Store');
  65 |         await expect(storeWidget).toBeVisible();
  66 |     }
  67 | }
```